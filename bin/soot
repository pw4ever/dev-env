#! /bin/bash
# Soot (https://sable.github.io/soot/) start-up script
# author: Wei Peng <4pengw@gmail.com>
# version: 20141229
# deps: bash, GNU coreutils, wget, procps-ng

WGET='wget'

# http://stackoverflow.com/a/246128
DIR=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )

URL_PREFIX='https://ssebuild.cased.de/nightly/soot/lib/'

MAIN='soot-trunk.jar'
MAIN_JAR="${DIR}/${MAIN}"

declare -a content
content=("${MAIN}")

for index in $(seq 0 $(( ${#content[@]} - 1 ))) 
do
    ${WGET} -nc -nd -P ${DIR} "${URL_PREFIX}${content[$index]}"
done

[ -f "${MAIN_JAR}" ] && java ${JVM_OPTS--Xmx2048m} -jar "${MAIN_JAR}" "$@"
